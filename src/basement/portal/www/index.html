<!DOCTYPE html>
<html>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> <!--bytt til egen css fil-->
    <head>
        
    </head>
    <body>
        <!--Navigasjonsbar på toppen-->
        <nav class="nav-bar">
            <img class="logo-img" src="BasementUB-logo.PNG" alt="Logo"> <!--Logo skal lenke til forsiden?-->
            <div class="container2" id="filterMeny" onclick="openMenu(this)"> <!--Denne må kunne forbedres-->
                <div class="bar1"></div>  <!--Disse er de svarte barene i menyen, men dette burde kunne forbedres-->
                <div class="bar2"></div>
                <div class="bar3"></div>
                <div class="hamburg-dropdown" id="hamburg-dropdown" style="display:none" onClick='javascript:void(0);'>
                  <h2>Kategorier</h2>
                  <a href="#">Mest populære</a>
                  <a href="#">Nyeste</a>
                  <a href="#">Førstkommende</a>
                  <h2>Sjanger</h2>
                  <a href="#" onClick="filtrerKort('Pop')">Pop</a>
                  <a href="#" onClick="filtrerKort('Rock')">Rap</a>
                  <a href="#" onClick="filtrerKort('Indie')">Indie</a>
                  <a href="#" onClick="filtrerKort('Rock')">Rock</a>
                  <a href="#" onClick="filtrerKort('Metal')">Metal</a>
                  <a href="#" onClick="filtrerKort('Klassisk')">Klassisk</a>
                  <a href="#" onClick="filtrerKort('Jazz')">Jazz</a>
                  <a href="#" onClick="filtrerKort('Elektronisk')">Elektronisk</a>
                  <a href="#" onClick="filtrerKort('Annet')">Annet</a>
                </div>
            </div><!-- Login-knappen -->
            <button class="login" id="login-btn" onClick="document.getElementById('id01').style.display='block'" style="width:auto;">Log in/Sign up</button> <!--Knappen skal åpne et innloggingsvindu, ikke sende til ny side-->
            <!--TODO legg inn valg under menyen her-->
            <div class="urs-options" id="usr-opt" style="display:none">
              <button class="usr-link" id="usr-link" onClick="openUsrmenu()" ></button>
              <div id="usr-dropdown" class="usr-dropdown-menu" >
                <a href="#">Profil</a>
                <a href="#" onClick="openEventReg()">Lag kort</a>
                <a href="#" onClick="logOut()">Logg ut</a>
              </div>
            </div>
            <h1 class="page-title">Basement</h1><!--Font for denne endres i CSS-->
          </nav>
          <!--Dette er innloggingsformen-->
          <div id="id01" class="modal">
            <form id="form1" class="modal-content animate" action="javascript:void(0);" onsubmit="validerLogin(document.getElementById('uname-login'), document.getElementById('psw-login'))" method="post">
                <div class="imgcontainer"><!--Dette er X-en oppe i hjørnet-->
                    <span onclick="document.getElementById('id01').style.display='none'; clearFields('form1');" class="close" title="Close Modal">&times;</span>
                </div>
                <div class="container"><!--Brukernavn og passord til innlogging:-->
                    <label for="uname"><b>Brukernavn</b></label>
                    <input type="text" placeholder="Skriv Brukernavn" name="uname" id="uname-login" required>
              
                    <label for="psw"><b>Passord</b></label>
                    <input type="password" placeholder="Skriv Passord" name="psw" id="pws-login" required>
                      
                    <button type="submit" onClick="">Logg inn</button>
                    <label>
                      <input type="checkbox" checked="checked" name="remember"> Husk meg
                    </label>
                  </div>
                  <div class="container" style="background-color:#f1f1f1">
                    <button class="newusr" onClick="openReg()" style="width:auto;">Opprett bruker</button><!--Knapp for å registrere ny bruker-->
                    <span class="psw">Glemt <a href="#">passord?</a></span>
                  </div>
            </form>
          </div>
          <!--Formen for å registrere ny bruker:-->
          <!--TODO! Legg inn bedre css-koden for denne!-->
          <div id="id02" class="modal2"> <!--javascript:void(0);-->
            <form id="form2" class="modal-content animate" action="action_page.php" onsubmit="regNyBruker(this)" method="post">
                <div class="imgcontainer"><!--Dette er x-en oppe i hjørnet for å lukke vinduet-->
                    <span onclick="document.getElementById('id02').style.display='none'; clearFields('form2')" class="close" title="Close Modal">&times;</span>
                </div>
                <div class="container"><!--Felt for brukernavn:-->
                    <label for="reguname"><b>Brukernavn</b></label>
                    <input type="text" placeholder="Skriv Brukernavn" name="uname" required>
                    <!--Feltene for passord, med mønster som må følges:-->
                    <label for="regpsw1"><b>Passord</b></label>
                    <input type="password" placeholder="Skriv Passord" name="psw" id="psw1" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Passordet må inneholde stor bokstav, liten bokstav, tall og være 8 karakterer langt" required>
                    <label for="regpsw2"><b>Bekreft passord</b></label>
                    <input type="password" placeholder="Skriv Passord" name="psw" id="psw2" oninput="checkPassword(this)" required>
                    <!--Feltene for e-postadresse:-->
                    <label for="mail1"><b>E-post</b></label>
                    <input type="email" placeholder="Angi E-postadresse" name="email" id="email1" required>
                    <label for="mail2"><b>Bekreft e-post</b></label>
                    <input type="email" placeholder="Angi E-postadresse" name="email" id="email2" oninput="checkEmail(this)" required>

                    <label><!--Boks for om brukeren er en artist. Denne vil være automatisk i prototypen-->
                      <input type="checkbox" checked="checked" id="checkArtist"> Jeg er en artist
                    </label>
                  
                    <button type="submit">Registrer bruker</button>
                    
                  </div>
            </form>
          </div>
          <div id="id03" class="modal3">
            <form id="form3" class="modal-content animate" action="javascript:void(0);" onsubmit="lagKort(this)">
              <div class="imgcontainer"><!--Dette er x-en oppe i hjørnet for å lukke vinduet-->
                <span onclick="document.getElementById('id03').style.display='none'; clearFields('form3')" class="close" title="Close Modal">&times;</span>
            </div>
              <div class="container"><!--Felt for brukernavn:-->
                <label for="bildelink">Lenke til bilde:</label>
                <input type="text" placeholder="Bildelenke" id="bildelink">
                <label for="datokonsert">Konsertdato</label>
                <input type="date" placeholder="3/3/3" id="konsertdato" required>
                <label for="spillested">Konsertlokale</label>
                <input type="text" placeholder="Sted" id="konsertsted" required>
                <label for="musikktype">Sjanger</label>
                <select name="sjanger" id="sjanger" required>
                  <option value="Pop">Pop</option>
                  <option value="Rap">Rap</option>
                  <option value="Indie">Indie</option>
                  <option value="Rock">Rock</option>
                  <option value="Metal">Metal</option>
                  <option value="Klassisk">Klassisk</option>
                  <option value="Jazz">Jazz</option>
                  <option value="Elektro">Elektronisk</option>
                  <option value="Annet">Annet</option>
                </select>
                <button type="submit">Registrer konsert</button>
                </div>
            </form>
          </div>
          <!--Her skal feeden for poster være-->
          <!--Disse er eksempler på bokser med arrangementer og hvordan det ser ut:-->
          <div class="row" id="row">
            <div class="column">
              <div class="card" id="card1">
                <h3>Card 1</h3>
                <p>Some text</p>
                <p>Some text</p>
              </div>
            </div>
          
            <div class="column">
              <div class="card">
                <h3>Card 2</h3>
                <p>Some text</p>
                <p>Some text</p>
              </div>
            </div>
            
            <div class="column">
              <div class="card">
                <h3>Card 3</h3>
                <p>Some text</p>
                <p>Some text</p>
              </div>
            </div>
            
            <div class="column">
              <div class="card">
                <h3>Card 4</h3>
                <p>Some text</p>
                <p>Some text</p>
              </div>
            </div>

            <div class="column">
              <div class="card">
                <h3>Card 5</h3>
                <p>Some text</p>
                <p>Some text</p>
              </div>
            </div>
          </div>



        
        
    </body>
    <footer>
      <div class="footer-bar">&copy; BasementUB 2020</div>
    </footer>
    <!--Legg til footer med opphavsrett og shit? Kontakt oss og hjelpeside?-->
    <!--Skal disse scriptene flyttes til egen fil?-->
    <script>
        //Hent Modalen
        var modal = document.getElementById('id01');
        var modal2 = document.getElementById('id02');
        var modal3 = document.getElementById('id03');


        if(sessionStorage.getItem('userName') == null){
          document.getElementById('login-btn').style.display = "block";
          document.getElementById('usr-opt').style.display = "none";
        }else{
          document.getElementById('usr-link').innerHTML = sessionStorage.getItem('userName');
          document.getElementById('login-btn').style.display = "none";
          document.getElementById('usr-opt').style.display = "block";
          
        }
        function logOut(){
          sessionStorage.clear();
          window.location.reload();
        }

        

        function openUsrmenu(){
          document.getElementById("usr-dropdown").classList.toggle("show");
        }

        //Når noen trykker utenfor vinduet, lukk det
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
                clearFields("form1");
            }
            if (event.target == modal3) {
                modal3.style.display = "none";
                clearFields("form3");
            }
            if (!event.target.matches('.usr-link')) {
              var dropdowns = document.getElementsByClassName("usr-dropdown-menu");
              var i;
              for (i = 0; i < dropdowns.length; i++) {
                var openDropdown = dropdowns[i];
                if (openDropdown.classList.contains('show')) {
                  openDropdown.classList.remove('show');
                }
              }
            }
        }
        //Tømmer alle feltene når registrerings- eller innloggingsvinduet lukkes
        function clearFields(myform){
          document.getElementById(myform).reset();
        }
        //Åpner registreringsvinduet og lukker innloggingsvinduet
        function openReg(){
          document.getElementById('id02').style.display='block';
          modal.style.display = "none";
        }
        function openEventReg(){
          document.getElementById('id03').style.display='block';
        }
        //Sjekker at passordene matcher
        function checkPassword(input){
          if(input.value != document.getElementById('psw1').value){
            input.setCustomValidity('Passordet matcher ikke.');
          }else{
            input.setCustomValidity('');
          }
        }
        //Sjekker at e-postene matcher 
        function checkEmail(input){
          if(input.value != document.getElementById('email1').value){
            input.setCustomValidity('E-postadressen matcher ikke.');
          }else{
            input.setCustomValidity('');
          }
        }
        
        function validerLogin(uname, pword){
          if(uname.value == "Arnold" ){
            sessionStorage.setItem('userName', uname.value);
            window.location.reload();
          }else{
            uname.setCustomValidity('Brukernavn og passord matcher ikke');
          }
        }

        function filtrerKort(input){ //Denne må endres på!!!
          var kort = document.getElementById('row').getElementsByClassName('column');
          for(var i=0;i<kort.length; i++){
            if(kort[i].getAttribute('data-genre').value != input){
              kort[i].style.display = 'none';
            }
          }
          /*if(document.getElementById('card5').style.display == 'none'){
            document.getElementById('card5').style.display = 'block';
          }else{
            document.getElementById('card5').style.display = 'none';
          }*/
        }

        function lagKort(myform){
          var column = document.createElement('div');
          var card = document.createElement('div');
          column.setAttribute("class", "column");
          column.setAttribute("id", "card5");
          column.setAttribute("data-genre", document.getElementById('sjanger'));
          card.setAttribute("class", "card");
          card.innerHTML = '<h3>' + sessionStorage.getItem('userName') + '</h3><p>' + document.getElementById('konsertdato').value + ' - ' + document.getElementById('konsertsted').value + '</p><p>' + document.getElementById('sjanger').value + '</p>';
          document.getElementById('row').appendChild(column);
          column.appendChild(card);
          modal3.style.display = "none";
          clearFields("form3");
        }
        
        
        //Åpner menyen i hjørnet
        function openMenu(x) {
            x.classList.toggle("change");
            if(document.getElementById('hamburg-dropdown').style.display == 'none'){
              document.getElementById('hamburg-dropdown').style.display='block';
            }else{
              document.getElementById('hamburg-dropdown').style.display='none';
            }
        }
        var filterMeny = document.getElementById('hamburg-dropdown');
        filterMeny.addEventListener("click", function (e) {
          e.stopPropagation()
        });

    </script>

</html>